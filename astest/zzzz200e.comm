# coding=utf-8
# --------------------------------------------------------------------
# Copyright (C) 1991 - 2025 - EDF R&D - www.code-aster.org
# This file is part of code_aster.
#
# code_aster is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# code_aster is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with code_aster.  If not, see <http://www.gnu.org/licenses/>.
# --------------------------------------------------------------------

DEBUT(CODE="OUI", DEBUG=_F(SDVERI="OUI"), IGNORE_ALARM=("MODELISA4_9"))
#
# LES MAILLES APLATIES SONT DUES AUX ELEMENTS DISCRETS DE TYPE SEG2 DONT LES
# NOEUDS SONT CONFONDUS
#

MAILLAGE = LIRE_MAILLAGE(FORMAT="MED")
MAILLAGE = DEFI_GROUP(
    reuse=MAILLAGE, MAILLAGE=MAILLAGE, CREA_GROUP_NO=_F(GROUP_MA=("SRADIER", "HRADIER"))
)

STICKMOD = AFFE_MODELE(
    MAILLAGE=MAILLAGE,
    AFFE=(
        _F(GROUP_MA="POU_D_T", PHENOMENE="MECANIQUE", MODELISATION="POU_D_T"),
        _F(GROUP_MA="MASSES", PHENOMENE="MECANIQUE", MODELISATION="DIS_TR"),
        _F(GROUP_MA="LIAI_NOE", PHENOMENE="MECANIQUE", MODELISATION="DIS_TR"),
        _F(GROUP_MA="VRADIER", PHENOMENE="MECANIQUE", MODELISATION="3D"),
    ),
)

# ----------------------------------------------------------------------
#  DEFINITION DES MATERIAUX

MAT_1 = DEFI_MATERIAU(
    ELAS=_F(E=4.000000000e10, NU=1.494252874e-01, RHO=0.000000000e00, ALPHA=0.000000000e00)
)

MAT_2 = DEFI_MATERIAU(
    ELAS=_F(E=4.000000000e10, NU=1.494252874e-01, RHO=2.500000000e03, ALPHA=0.000000000e00)
)

MAT_3 = DEFI_MATERIAU(
    ELAS=_F(E=4.000000000e10, NU=1.494252874e-01, RHO=2.500000000e00, ALPHA=0.000000000e00)
)

#

CHAMPMAT = AFFE_MATERIAU(
    MAILLAGE=MAILLAGE,
    AFFE=(
        _F(GROUP_MA="MAT_1", MATER=MAT_1),
        _F(GROUP_MA="MAT_2", MATER=MAT_2),
        _F(GROUP_MA="VRADIER", MATER=MAT_2),
        # _F(  GROUP_MA = 'SRADIER',   MATER = MAT_3)
    ),
)

#
# ----------------------------------------------------------------------
# AFFECTATION DES CARACTERISTIQUES ELEMENTAIRES

CARA_ELE = AFFE_CARA_ELEM(
    MODELE=STICKMOD,
    # COQUE=_F( GROUP_MA = 'SRADIER', EPAIS = 0.001),
    POUTRE=(
        _F(
            GROUP_MA="SEC_2",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                8.700000000e01,
                2.756900000e04,
                2.756900000e04,
                2.000000000e00,
                2.000000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_3",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.696000000e02,
                4.294200000e04,
                4.294200000e04,
                2.000000000e00,
                2.000000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_4",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                9.400000000e01,
                1.250000000e04,
                1.250000000e04,
                7.705000000e01,
                7.705000000e01,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_5",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.852000000e01,
                6.522400000e03,
                6.142000000e03,
                5.720000000e00,
                3.540000000e00,
                1.000000000e06,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_6",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.852000000e01,
                6.522400000e03,
                6.142000000e03,
                6.800000000e00,
                3.950000000e00,
                1.000000000e06,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_7",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                2.328000000e02,
                1.095800000e04,
                2.128000000e04,
                4.950000000e00,
                1.870000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_8",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                2.277000000e02,
                2.300000000e04,
                2.107900000e04,
                4.550000000e00,
                3.340000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_9",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.490000000e01,
                1.900000000e02,
                1.500000000e02,
                1.860000000e00,
                1.770000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_10",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.430000000e01,
                1.200000000e02,
                1.170000000e02,
                3.570000000e00,
                2.200000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_11",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                5.348000000e01,
                5.486000000e02,
                5.486000000e02,
                7.640000000e01,
                7.640000000e01,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_12",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                5.348000000e01,
                5.486000000e02,
                4.253000000e02,
                1.720000000e00,
                1.060000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_13",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.521000000e01,
                3.261000000e02,
                3.261000000e02,
                1.370000000e00,
                1.370000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_14",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.000000000e01,
                5.934000000e02,
                1.000000000e00,
                2.080000000e00,
                1.000000000e03,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
    ),
    DISCRET=(
        _F(
            GROUP_MA=(
                "MAS2",
                "MAS3",
                "MAS4",
                "MAS5",
                "MAS6",
                "MAS7",
                "MAS8",
                "MAS9",
                "MAS10",
                "MAS11",
                "MAS12",
                "MAS13",
                "MAS14",
                "MAS15",
                "MAS16",
                "MAS17",
                "MAS18",
                "MAS19",
                "MAS20",
                "MAS21",
                "MAS22",
                "MAS23",
                "MAS24",
                "MAS25",
                "MAS26",
                "MAS27",
            ),
            CARA="K_TR_D_N",
            VALE=(0.0, 0.0, 0.0, 0.0, 0.0, 0.0),
        ),
        # MASSES ET INERTIES LOCALISEES
        _F(
            GROUP_MA="MAS2",
            CARA="M_TR_D_N",
            VALE=(
                9.768000000e06,
                1.484000000e09,
                1.484000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS3",
            CARA="M_TR_D_N",
            VALE=(
                2.827000000e06,
                9.359000000e08,
                9.359000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS4",
            CARA="M_TR_D_N",
            VALE=(
                2.827000000e06,
                9.359000000e08,
                9.359000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS5",
            CARA="M_TR_D_N",
            VALE=(
                1.921000000e06,
                6.176000000e08,
                6.176000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS6",
            CARA="M_TR_D_N",
            VALE=(
                2.175000000e06,
                7.074000000e08,
                7.074000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS7",
            CARA="M_TR_D_N",
            VALE=(
                2.729000000e06,
                9.008000000e08,
                9.008000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS8",
            CARA="M_TR_D_N",
            VALE=(
                4.020000000e06,
                9.107000000e08,
                9.107000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS9",
            CARA="M_TR_D_N",
            VALE=(
                3.554000000e06,
                8.840000000e08,
                8.840000000e08,
                1.768000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS10",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                2.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS11",
            CARA="M_TR_D_N",
            VALE=(
                2.098000000e06,
                5.200000000e08,
                5.200000000e08,
                1.040000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS12",
            CARA="M_TR_D_N",
            VALE=(
                5.246000000e06,
                1.393000000e09,
                1.393000000e09,
                2.786000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS13",
            CARA="M_TR_D_N",
            VALE=(
                5.858000000e06,
                1.525000000e09,
                1.525000000e09,
                3.050000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS14",
            CARA="M_TR_D_N",
            VALE=(
                6.810000000e06,
                1.740000000e09,
                1.740000000e09,
                3.480000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS15",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e07,
                2.020000000e09,
                2.020000000e09,
                4.040000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS16",
            CARA="M_TR_D_N",
            VALE=(
                3.000000000e05,
                3.120000000e07,
                2.690000000e07,
                5.810000000e07,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS17",
            CARA="M_TR_D_N",
            VALE=(
                2.750000000e05,
                5.700000000e06,
                3.500000000e06,
                9.200000000e06,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS18",
            CARA="M_TR_D_N",
            VALE=(
                2.960000000e06,
                4.340000000e08,
                4.260000000e08,
                8.600000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS19",
            CARA="M_TR_D_N",
            VALE=(
                1.130000000e06,
                3.620000000e07,
                3.190000000e07,
                6.810000000e07,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS20",
            CARA="M_TR_D_N",
            VALE=(
                4.230000000e06,
                5.360000000e08,
                5.560000000e08,
                1.091000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS21",
            CARA="M_TR_D_N",
            VALE=(
                3.260000000e06,
                5.390000000e07,
                6.750000000e07,
                1.214000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS22",
            CARA="M_TR_D_N",
            VALE=(
                4.930000000e06,
                5.500000000e08,
                5.280000000e08,
                1.078000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS23",
            CARA="M_TR_D_N",
            VALE=(
                1.890000000e06,
                1.700000000e08,
                1.000000000e00,
                1.700000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS24",
            CARA="M_TR_D_N",
            VALE=(
                6.980000000e06,
                9.130000000e08,
                6.930000000e08,
                1.606000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS25",
            CARA="M_TR_D_N",
            VALE=(
                3.800000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS26",
            CARA="M_TR_D_N",
            VALE=(
                2.700000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS27",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        # FIN DES CARACTERISTIQUES DES MASSES
        # LIAISONS SIMPLES NOEUD-NOEUD
        _F(
            GROUP_MA="RLN_1",
            CARA="K_TR_D_L",
            VALE=(
                1.000000000e00,
                1.320000000e10,
                7.080000000e08,
                1.424000000e10,
                1.000000000e00,
                1.000000000e13,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_2",
            CARA="K_TR_D_L",
            VALE=(
                7.800000000e10,
                1.040000000e11,
                6.160000000e09,
                1.632000000e11,
                5.560000000e10,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_3",
            CARA="K_TR_D_L",
            VALE=(
                1.692000000e11,
                1.840000000e11,
                1.872000000e10,
                7.600000000e11,
                1.800000000e11,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_4",
            CARA="K_TR_D_L",
            VALE=(
                1.000000000e16,
                2.000000000e11,
                5.872000000e10,
                4.039000000e12,
                1.000000000e16,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_5",
            CARA="K_TR_D_L",
            VALE=(
                1.900000000e11,
                1.900000000e11,
                2.000000000e09,
                5.000000000e11,
                5.000000000e11,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
    ),
)

# LA STRUCTURE EST RIGIDIFIEE A L INTERFACE
# ------------------------------------------

COND_LIM = AFFE_CHAR_MECA(
    MODELE=STICKMOD,
    LIAISON_SOLIDE=(_F(GROUP_NO=("HRADIER",)),),
    DDL_IMPO=_F(GROUP_NO=("SRADIER",), DX=0.0, DY=0.0, DZ=0.0),
)

#
# CALCUL DE LA MASSE ET INERTIES DE LA STRUCTURE -----------------------

MASSESTR = POST_ELEM(
    MODELE=STICKMOD, CHAM_MATER=CHAMPMAT, CARA_ELEM=CARA_ELE, MASS_INER=_F(TOUT="OUI")
)

#


# ----------------------------------------------------------------------

RIGI_ELE = CALC_MATR_ELEM(
    MODELE=STICKMOD, OPTION="RIGI_MECA", CHARGE=COND_LIM, CHAM_MATER=CHAMPMAT, CARA_ELEM=CARA_ELE
)

MASS_ELE = CALC_MATR_ELEM(
    MODELE=STICKMOD, OPTION="MASS_MECA", CHARGE=COND_LIM, CHAM_MATER=CHAMPMAT, CARA_ELEM=CARA_ELE
)

#

NUMEDDL = NUME_DDL(MATR_RIGI=RIGI_ELE)

RIGIDITE = ASSE_MATRICE(MATR_ELEM=RIGI_ELE, NUME_DDL=NUMEDDL)

MASSE = ASSE_MATRICE(MATR_ELEM=MASS_ELE, NUME_DDL=NUMEDDL)


#
# CALCUL DES MODES :
# ---------------------------------------------

"""
MODE=CALC_MODES( MATR_RIGI=RIGIDITE,
                 MATR_MASS=MASSE,
                 CALC_FREQ=_F( NMAX_FREQ = 10 ),
                )
"""

MODSTA = MODE_STATIQUE(
    MATR_RIGI=RIGIDITE, MODE_STAT=_F(GROUP_NO="SRADIER", AVEC_CMP=("DX", "DY", "DZ"))
)

INTERDYN = DEFI_INTERF_DYNA(
    NUME_DDL=NUMEDDL, INTERFACE=_F(NOM="DROITE", TYPE="CRAIGB", GROUP_NO=("SRADIER",))
)

BAMO = DEFI_BASE_MODALE(
    RITZ=(_F(MODE_MECA=MODSTA, NMAX_MODE=0), _F(MODE_INTF=MODSTA, NMAX_MODE=1999)),
    INTERF_DYNA=INTERDYN,
    NUME_REF=NUMEDDL,
)

NDDLGEN = NUME_DDL_GENE(BASE=BAMO, STOCKAGE="PLEIN")

#
# CALCUL DU MACRO-ELEMENT DYNAMIQUE :
# ---------------------------------------------


MAEL0 = MACR_ELEM_DYNA(BASE_MODALE=BAMO, MATR_RIGI=RIGIDITE, MATR_MASS=MASSE)

#
FO1 = DEFI_FONCTION(NOM_PARA="FREQ", VALE=(0.0, 1.0, 100.0, 1.0))

# Pour reference :
TABSOL0 = DEFI_SOL_MISS(
    TITRE="SOL STRATIFIE",
    MATERIAU=(
        _F(E=1.01e10, NU=0.38, RHO=2400, AMOR_HYST=0.10),
        _F(E=2.06e10, NU=0.36, RHO=2500, AMOR_HYST=0.10),
        _F(E=1.66e10, NU=0.39, RHO=2400, AMOR_HYST=0.10),
        _F(E=2.60e10, NU=0.31, RHO=2500, AMOR_HYST=0.10),
    ),
    COUCHE=(
        _F(EPAIS=10.5, NUME_MATE=1, RECEPTEUR="OUI", SOURCE="OUI"),
        _F(EPAIS=10.5, NUME_MATE=2),
        _F(EPAIS=19.5, NUME_MATE=3),
        _F(SUBSTRATUM="OUI", NUME_MATE=4),
    ),
    INFO=2,
)

TABSOL = DEFI_SOL_MISS(
    TITRE="SOL STRATIFIE",
    MATERIAU=(
        _F(E=1.01e10, NU=0.38, RHO=2400, AMOR_HYST=0.10),
        _F(E=2.06e10, NU=0.36, RHO=2500, AMOR_HYST=0.10),
        _F(E=1.66e10, NU=0.39, RHO=2400, AMOR_HYST=0.10),
        _F(E=2.60e10, NU=0.31, RHO=2500, AMOR_HYST=0.10),
    ),
    COUCHE_AUTO=_F(
        EPAIS_PHYS=(10.5, 10.5, 19.5),
        SURF="OUI",
        HOMOGENE="NON",
        NUME_MATE=(1, 2, 3),
        NUME_MATE_SUBSTRATUM=4,
    ),
    INFO=2,
)

# TRAITEMENT DE MISS3D PAR EXEC_LOGICIEL
# ---------------------------------------

CALC_MISS(
    TYPE_RESU="FICHIER",
    TABLE_SOL=TABSOL,
    MACR_ELEM_DYNA=MAEL0,
    AMOR_REDUIT=(0.07,),
    GROUP_MA_INTERF="SRADIER",
    UNITE_IMPR_ASTER=26,
    UNITE_RESU_IMPE=31,
    UNITE_RESU_FORC=41,
    VERSION="V6.6",
    PARAMETRE=_F(
        FREQ_MIN=3.0,  # 0.3,
        FREQ_MAX=3.0,
        FREQ_PAS=2.7,
        Z0=-6.05,
        SURF="OUI",
        AUTO="OUI",
        OPTION_DREF="NON",
        OPTION_RFIC="NON",
        COEF_OFFSET=8,
        # Valeurs en manuel :
        # ALGO = 'DEPL',
        # OFFSET_MAX=60,
        # OFFSET_NB=400,
        SPEC_MAX=0.03,
        SPEC_NB=2048,
    ),
)

impe = LIRE_IMPE_MISS(
    BASE=BAMO,
    NUME_DDL_GENE=NDDLGEN,
    UNITE_RESU_IMPE=31,
    FREQ_EXTR=3.0,
    SYME="OUI",
    # TYPE='BINAIRE',
)

"""

impe0 = LIRE_IMPE_MISS(BASE=BAMO, NUME_DDL_GENE=NDDLGEN,
                        UNITE_RESU_IMPE=31, FREQ_EXTR=0.3,
                        SYME='OUI',
                        #TYPE='BINAIRE',
                           )

"""


rito = COMB_MATR_ASSE(
    COMB_R=(_F(MATR_ASSE=impe, PARTIE="REEL", COEF_R=1.0),), SANS_CMP="LAGR"  # impe0,
)

"""

mato=COMB_MATR_ASSE(COMB_R=(
                             _F(MATR_ASSE=impe0,
                                PARTIE='REEL',
                                #COEF_R=1.017e-3,),
                                COEF_R=2.85e-3,),
                             _F(MATR_ASSE=impe,
                                PARTIE='REEL',
                                #COEF_R=-1.017e-3,),
                                COEF_R=-2.85e-3,),
                            ),
                                SANS_CMP='LAGR',
                    )

"""

amto2 = COMB_MATR_ASSE(
    COMB_R=(
        _F(MATR_ASSE=impe, PARTIE="IMAG", COEF_R=5.30e-2),
        # COEF_R=3.975e-2,),
    ),
    SANS_CMP="LAGR",
)

#

CALC_MISS(
    TYPE_RESU="FICHIER_TEMPS",
    PROJET="Miss_Laplace",
    MACR_ELEM_DYNA=MAEL0,
    GROUP_MA_INTERF="SRADIER",
    TABLE_SOL=TABSOL,
    UNITE_IMPR_ASTER=26,
    INST_FIN=4.0,
    PAS_INST=0.05,
    COEF_SURECH=1.0,  # Pour accélérer le calcul on ne suréchantillonne pas
    PCENT_FREQ_CALCUL=0,  # 10, #20, #40,
    FACTEUR_INTERPOL=10,
    PRECISION=1e-10,
    UNITE_RESU_RIGI=35,
    UNITE_RESU_AMOR=37,
    # UNITE_RESU_MASS = 38,
    # TYPE_FICHIER_TEMPS='BINAIRE',
    MATR_GENE=_F(
        # MATR_MASS = mato,
        MATR_RIGI=rito,
        MATR_AMOR=amto2,
        AMOR_HYST="DANS_MATR_AMOR",
        DECOMP_IMPE="PRODUIT",
    ),
    PARAMETRE=_F(
        FREQ_IMAG=1.0,
        Z0=-6.05,
        SURF="OUI",
        DREF=15,
        ALGO="DEPL",
        OFFSET_MAX=60,
        OFFSET_NB=400,
        SPEC_MAX=0.03,
        SPEC_NB=2048,
    ),
)

MATK = LIRE_IMPE_MISS(
    UNITE_RESU_IMPE=35,
    INST_EXTR=0.0,
    SYME="OUI",  # TYPE='BINAIRE',
    BASE=BAMO,
    NUME_DDL_GENE=NDDLGEN,
)

MATC = LIRE_IMPE_MISS(
    UNITE_RESU_IMPE=37,
    INST_EXTR=0.0,
    SYME="OUI",  # TYPE='BINAIRE',
    BASE=BAMO,
    NUME_DDL_GENE=NDDLGEN,
)

"""

MATM = LIRE_IMPE_MISS(UNITE_RESU_IMPE=38, INST_EXTR=0.0,
                      SYME='OUI', TYPE='BINAIRE',
                      BASE=BAMO, NUME_DDL_GENE=NDDLGEN)

"""


# Termes Z0

MAEL = MACR_ELEM_DYNA(
    BASE_MODALE=BAMO,
    MATR_IMPE_RIGI=MATK,
    MATR_IMPE_AMOR=MATC,
    # MATR_IMPE_MASS = MATM,
)


MAYADYN = DEFI_MAILLAGE(
    DEFI_SUPER_MAILLE=(_F(MACR_ELEM=MAEL, SUPER_MAILLE="STAT1"),),
    RECO_GLOBAL=_F(TOUT="OUI"),
    DEFI_NOEUD=_F(TOUT="OUI", INDEX=(1, 0, 1, 8)),
)

MAILB = ASSE_MAILLAGE(MAILLAGE_1=MAILLAGE, MAILLAGE_2=MAYADYN, OPERATION="SOUS_STR")
#


MODELB = AFFE_MODELE(
    MAILLAGE=MAILB,
    AFFE_SOUS_STRUC=_F(SUPER_MAILLE=("STAT1",), PHENOMENE="MECANIQUE"),
    AFFE=(
        _F(GROUP_MA="POU_D_T", PHENOMENE="MECANIQUE", MODELISATION="POU_D_T"),
        _F(GROUP_MA="MASSES", PHENOMENE="MECANIQUE", MODELISATION="DIS_TR"),
        _F(GROUP_MA="LIAI_NOE", PHENOMENE="MECANIQUE", MODELISATION="DIS_TR"),
        _F(GROUP_MA="VRADIER", PHENOMENE="MECANIQUE", MODELISATION="3D"),
    ),
)

ELEMB = AFFE_CARA_ELEM(
    MODELE=MODELB,
    POUTRE=(
        _F(
            GROUP_MA="SEC_2",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                8.700000000e01,
                2.756900000e04,
                2.756900000e04,
                2.000000000e00,
                2.000000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_3",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.696000000e02,
                4.294200000e04,
                4.294200000e04,
                2.000000000e00,
                2.000000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_4",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                9.400000000e01,
                1.250000000e04,
                1.250000000e04,
                7.705000000e01,
                7.705000000e01,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_5",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.852000000e01,
                6.522400000e03,
                6.142000000e03,
                5.720000000e00,
                3.540000000e00,
                1.000000000e06,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_6",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.852000000e01,
                6.522400000e03,
                6.142000000e03,
                6.800000000e00,
                3.950000000e00,
                1.000000000e06,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_7",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                2.328000000e02,
                1.095800000e04,
                2.128000000e04,
                4.950000000e00,
                1.870000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_8",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                2.277000000e02,
                2.300000000e04,
                2.107900000e04,
                4.550000000e00,
                3.340000000e00,
                1.000000000e07,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_9",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.490000000e01,
                1.900000000e02,
                1.500000000e02,
                1.860000000e00,
                1.770000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_10",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                1.430000000e01,
                1.200000000e02,
                1.170000000e02,
                3.570000000e00,
                2.200000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_11",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                5.348000000e01,
                5.486000000e02,
                5.486000000e02,
                7.640000000e01,
                7.640000000e01,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_12",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                5.348000000e01,
                5.486000000e02,
                4.253000000e02,
                1.720000000e00,
                1.060000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_13",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.521000000e01,
                3.261000000e02,
                3.261000000e02,
                1.370000000e00,
                1.370000000e00,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="SEC_14",
            SECTION="GENERALE",
            CARA=("A", "IZ", "IY", "AY", "AZ", "JX", "EZ", "EY", "RY", "RZ", "RT"),
            VALE=(
                4.000000000e01,
                5.934000000e02,
                1.000000000e00,
                2.080000000e00,
                1.000000000e03,
                1.000000000e05,
                0.000000000e00,
                0.000000000e00,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
            ),
        ),
    ),
    DISCRET=(
        _F(
            GROUP_MA=(
                "MAS2",
                "MAS3",
                "MAS4",
                "MAS5",
                "MAS6",
                "MAS7",
                "MAS8",
                "MAS9",
                "MAS10",
                "MAS11",
                "MAS12",
                "MAS13",
                "MAS14",
                "MAS15",
                "MAS16",
                "MAS17",
                "MAS18",
                "MAS19",
                "MAS20",
                "MAS21",
                "MAS22",
                "MAS23",
                "MAS24",
                "MAS25",
                "MAS26",
                "MAS27",
            ),
            CARA="K_TR_D_N",
            VALE=(0.0, 0.0, 0.0, 0.0, 0.0, 0.0),
        ),
        # MASSES ET INERTIES LOCALISEES
        _F(
            GROUP_MA="MAS2",
            CARA="M_TR_D_N",
            VALE=(
                9.768000000e06,
                1.484000000e09,
                1.484000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS3",
            CARA="M_TR_D_N",
            VALE=(
                2.827000000e06,
                9.359000000e08,
                9.359000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS4",
            CARA="M_TR_D_N",
            VALE=(
                2.827000000e06,
                9.359000000e08,
                9.359000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS5",
            CARA="M_TR_D_N",
            VALE=(
                1.921000000e06,
                6.176000000e08,
                6.176000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS6",
            CARA="M_TR_D_N",
            VALE=(
                2.175000000e06,
                7.074000000e08,
                7.074000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS7",
            CARA="M_TR_D_N",
            VALE=(
                2.729000000e06,
                9.008000000e08,
                9.008000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS8",
            CARA="M_TR_D_N",
            VALE=(
                4.020000000e06,
                9.107000000e08,
                9.107000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS9",
            CARA="M_TR_D_N",
            VALE=(
                3.554000000e06,
                8.840000000e08,
                8.840000000e08,
                1.768000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS10",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                2.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS11",
            CARA="M_TR_D_N",
            VALE=(
                2.098000000e06,
                5.200000000e08,
                5.200000000e08,
                1.040000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS12",
            CARA="M_TR_D_N",
            VALE=(
                5.246000000e06,
                1.393000000e09,
                1.393000000e09,
                2.786000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS13",
            CARA="M_TR_D_N",
            VALE=(
                5.858000000e06,
                1.525000000e09,
                1.525000000e09,
                3.050000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS14",
            CARA="M_TR_D_N",
            VALE=(
                6.810000000e06,
                1.740000000e09,
                1.740000000e09,
                3.480000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS15",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e07,
                2.020000000e09,
                2.020000000e09,
                4.040000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS16",
            CARA="M_TR_D_N",
            VALE=(
                3.000000000e05,
                3.120000000e07,
                2.690000000e07,
                5.810000000e07,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS17",
            CARA="M_TR_D_N",
            VALE=(
                2.750000000e05,
                5.700000000e06,
                3.500000000e06,
                9.200000000e06,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS18",
            CARA="M_TR_D_N",
            VALE=(
                2.960000000e06,
                4.340000000e08,
                4.260000000e08,
                8.600000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS19",
            CARA="M_TR_D_N",
            VALE=(
                1.130000000e06,
                3.620000000e07,
                3.190000000e07,
                6.810000000e07,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS20",
            CARA="M_TR_D_N",
            VALE=(
                4.230000000e06,
                5.360000000e08,
                5.560000000e08,
                1.091000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS21",
            CARA="M_TR_D_N",
            VALE=(
                3.260000000e06,
                5.390000000e07,
                6.750000000e07,
                1.214000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS22",
            CARA="M_TR_D_N",
            VALE=(
                4.930000000e06,
                5.500000000e08,
                5.280000000e08,
                1.078000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS23",
            CARA="M_TR_D_N",
            VALE=(
                1.890000000e06,
                1.700000000e08,
                1.000000000e00,
                1.700000000e08,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS24",
            CARA="M_TR_D_N",
            VALE=(
                6.980000000e06,
                9.130000000e08,
                6.930000000e08,
                1.606000000e09,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS25",
            CARA="M_TR_D_N",
            VALE=(
                3.800000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS26",
            CARA="M_TR_D_N",
            VALE=(
                2.700000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        _F(
            GROUP_MA="MAS27",
            CARA="M_TR_D_N",
            VALE=(
                1.000000000e05,
                1.000000000e00,
                1.000000000e00,
                1.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
                0.000000000e00,
            ),
        ),
        # FIN DES CARACTERISTIQUES DES MASSES
        # LIAISONS SIMPLES NOEUD-NOEUD
        _F(
            GROUP_MA="RLN_1",
            CARA="K_TR_D_L",
            VALE=(
                1.000000000e00,
                1.320000000e10,
                7.080000000e08,
                1.424000000e10,
                1.000000000e00,
                1.000000000e13,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_2",
            CARA="K_TR_D_L",
            VALE=(
                7.800000000e10,
                1.040000000e11,
                6.160000000e09,
                1.632000000e11,
                5.560000000e10,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_3",
            CARA="K_TR_D_L",
            VALE=(
                1.692000000e11,
                1.840000000e11,
                1.872000000e10,
                7.600000000e11,
                1.800000000e11,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_4",
            CARA="K_TR_D_L",
            VALE=(
                1.000000000e16,
                2.000000000e11,
                5.872000000e10,
                4.039000000e12,
                1.000000000e16,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
        _F(
            GROUP_MA="RLN_5",
            CARA="K_TR_D_L",
            VALE=(
                1.900000000e11,
                1.900000000e11,
                2.000000000e09,
                5.000000000e11,
                5.000000000e11,
                1.000000000e14,
            ),
            REPERE="GLOBAL",
        ),
    ),
)


CHMATB = AFFE_MATERIAU(
    MAILLAGE=MAILB,
    AFFE=(
        _F(GROUP_MA="MAT_1", MATER=MAT_1),
        _F(GROUP_MA="MAT_2", MATER=MAT_2),
        _F(GROUP_MA="VRADIER", MATER=MAT_2),
        # _F(  GROUP_MA = 'SRADIER',   MATER = MAT_3)
    ),
)

# LA STRUCTURE EST RIGIDIFIEE A L INTERFACE
# ------------------------------------------

COND_LB = AFFE_CHAR_MECA(MODELE=MODELB, LIAISON_SOLIDE=(_F(GROUP_NO=("HRADIER",)),))

ASSEMBLAGE(
    MODELE=MODELB,
    CHAM_MATER=CHMATB,
    CARA_ELEM=ELEMB,
    CHARGE=COND_LB,
    NUME_DDL=CO("NUMEROTB"),
    MATR_ASSE=(
        _F(MATRICE=CO("MATRRIGI"), OPTION="RIGI_MECA"),
        _F(MATRICE=CO("MATRMASS"), OPTION="MASS_MECA"),
    ),
)

#
# CALCUL DES MODES :
# ---------------------------------------------

MODE2 = CALC_MODES(
    MATR_RIGI=MATRRIGI,
    MATR_MASS=MATRMASS,
    CALC_FREQ=_F(NMAX_FREQ=10),
    VERI_MODE=_F(STOP_ERREUR="NON"),
)


TEST_RESU(
    RESU=(
        _F(
            NUME_ORDRE=1, PARA="FREQ", RESULTAT=MODE2, VALE_CALC=4.57262477659789, CRITERE="RELATIF"
        ),
        _F(
            NUME_ORDRE=2,
            PARA="FREQ",
            RESULTAT=MODE2,
            VALE_CALC=4.581369239534687,
            CRITERE="RELATIF",
        ),
        _F(
            NUME_ORDRE=3,
            PARA="FREQ",
            RESULTAT=MODE2,
            VALE_CALC=4.829460878572754,
            CRITERE="RELATIF",
        ),
        _F(
            NUME_ORDRE=4,
            PARA="FREQ",
            RESULTAT=MODE2,
            VALE_CALC=4.829738774891176,
            CRITERE="RELATIF",
        ),
        _F(
            NUME_ORDRE=5,
            PARA="FREQ",
            RESULTAT=MODE2,
            VALE_CALC=7.267395494288842,
            CRITERE="RELATIF",
        ),
    )
)

FIN()
#
