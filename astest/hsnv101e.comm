# coding=utf-8
# --------------------------------------------------------------------
# Copyright (C) 1991 - 2025 - EDF R&D - www.code-aster.org
# This file is part of code_aster.
#
# code_aster is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# code_aster is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with code_aster.  If not, see <http://www.gnu.org/licenses/>.
# --------------------------------------------------------------------

# ( SANS PLASTICITE DE TRANSFORMATION)
# ======================================================================

DEBUT(CODE="OUI", ERREUR=_F(ALARME="EXCEPTION"), IMPR_MACRO="OUI")


# evolutions issues de HSNV101A

temp = DEFI_FONCTION(
    NOM_PARA="INST",
    VALE=(
        0.00000e00,
        9.00000e02,
        2.00000e00,
        8.90000e02,
        4.00000e00,
        8.80000e02,
        6.00000e00,
        8.70000e02,
        8.00000e00,
        8.60000e02,
        1.00000e01,
        8.50000e02,
        1.20000e01,
        8.40000e02,
        1.40000e01,
        8.30000e02,
        1.60000e01,
        8.20000e02,
        1.80000e01,
        8.10000e02,
        2.00000e01,
        8.00000e02,
        2.20000e01,
        7.90000e02,
        2.40000e01,
        7.80000e02,
        2.60000e01,
        7.70000e02,
        2.80000e01,
        7.60000e02,
        3.00000e01,
        7.50000e02,
        3.20000e01,
        7.40000e02,
        3.40000e01,
        7.30000e02,
        3.60000e01,
        7.20000e02,
        3.80000e01,
        7.10000e02,
        4.00000e01,
        7.00000e02,
        4.20000e01,
        6.90000e02,
        4.40000e01,
        6.80000e02,
        4.60000e01,
        6.70000e02,
        4.80000e01,
        6.60000e02,
        5.00000e01,
        6.50000e02,
        5.20000e01,
        6.40000e02,
        5.40000e01,
        6.30000e02,
        5.60000e01,
        6.20000e02,
        5.80000e01,
        6.10000e02,
        6.00000e01,
        6.00000e02,
        6.20000e01,
        5.90000e02,
        6.40000e01,
        5.80000e02,
        6.60000e01,
        5.70000e02,
        6.80000e01,
        5.60000e02,
        7.00000e01,
        5.50000e02,
        7.20000e01,
        5.40000e02,
        7.40000e01,
        5.30000e02,
        7.60000e01,
        5.20000e02,
        7.80000e01,
        5.10000e02,
        8.00000e01,
        5.00000e02,
        8.20000e01,
        4.90000e02,
        8.40000e01,
        4.80000e02,
        8.60000e01,
        4.70000e02,
        8.80000e01,
        4.60000e02,
        9.00000e01,
        4.50000e02,
        9.20000e01,
        4.40000e02,
        9.40000e01,
        4.30000e02,
        9.60000e01,
        4.20000e02,
        9.80000e01,
        4.10000e02,
        1.00000e02,
        4.00000e02,
        1.02000e02,
        3.90000e02,
        1.04000e02,
        3.80000e02,
        1.06000e02,
        3.70000e02,
        1.08000e02,
        3.60000e02,
        1.10000e02,
        3.50000e02,
        1.12000e02,
        3.40000e02,
        1.14000e02,
        3.30000e02,
        1.16000e02,
        3.20000e02,
        1.18000e02,
        3.10000e02,
        1.20000e02,
        3.00000e02,
        1.22000e02,
        2.90000e02,
        1.24000e02,
        2.80000e02,
        1.26000e02,
        2.70000e02,
        1.28000e02,
        2.60000e02,
        1.30000e02,
        2.50000e02,
        1.32000e02,
        2.40000e02,
        1.34000e02,
        2.30000e02,
        1.36000e02,
        2.20000e02,
        1.38000e02,
        2.10000e02,
        1.40000e02,
        2.00000e02,
        1.42000e02,
        1.90000e02,
        1.44000e02,
        1.80000e02,
        1.46000e02,
        1.70000e02,
        1.48000e02,
        1.60000e02,
        1.50000e02,
        1.50000e02,
        1.52000e02,
        1.40000e02,
        1.54000e02,
        1.30000e02,
        1.56000e02,
        1.20000e02,
        1.58000e02,
        1.10000e02,
        1.60000e02,
        1.00000e02,
        1.62000e02,
        9.00000e01,
        1.64000e02,
        8.00000e01,
        1.66000e02,
        7.00000e01,
        1.68000e02,
        6.00000e01,
        1.70000e02,
        5.00000e01,
        1.72000e02,
        4.00000e01,
        1.74000e02,
        3.00000e01,
        1.76000e02,
        2.00000e01,
    ),
)


phase0 = DEFI_CONSTANTE(VALE=0)
temp0 = DEFI_CONSTANTE(VALE=0)

phase3 = DEFI_FONCTION(
    NOM_PARA="INST",
    VALE=(
        0.00000e00,
        0.00000e00,
        6.00000e01,
        0.00000e00,
        6.20000e01,
        3.92003e-02,
        6.40000e01,
        7.84006e-02,
        6.60000e01,
        1.17601e-01,
        6.80000e01,
        1.56801e-01,
        7.00000e01,
        1.96002e-01,
        7.20000e01,
        2.35202e-01,
        7.40000e01,
        2.74402e-01,
        7.60000e01,
        3.13603e-01,
        7.80000e01,
        3.52803e-01,
        8.00000e01,
        3.92003e-01,
        8.20000e01,
        4.31203e-01,
        8.40000e01,
        4.70404e-01,
        8.60000e01,
        5.09604e-01,
        8.80000e01,
        5.48804e-01,
        9.00000e01,
        5.88005e-01,
        9.20000e01,
        6.27205e-01,
        9.40000e01,
        6.66405e-01,
        9.60000e01,
        7.05606e-01,
        9.80000e01,
        7.44806e-01,
        1.00000e02,
        7.84006e-01,
        1.02000e02,
        8.23207e-01,
        1.04000e02,
        8.62407e-01,
        1.06000e02,
        9.01607e-01,
        1.08000e02,
        9.40808e-01,
        1.10000e02,
        9.80008e-01,
        1.12000e02,
        1.00000e00,
        1.76000e02,
        1.00000e00,
    ),
)

phaseA = DEFI_FONCTION(
    NOM_PARA="INST",
    VALE=(
        0.00000e00,
        1.00000e00,
        6.00000e01,
        1.00000e00,
        6.20000e01,
        9.60800e-01,
        6.40000e01,
        9.21599e-01,
        6.60000e01,
        8.82399e-01,
        6.80000e01,
        8.43199e-01,
        7.00000e01,
        8.03998e-01,
        7.20000e01,
        7.64798e-01,
        7.40000e01,
        7.25598e-01,
        7.60000e01,
        6.86397e-01,
        7.80000e01,
        6.47197e-01,
        8.00000e01,
        6.07997e-01,
        8.20000e01,
        5.68797e-01,
        8.40000e01,
        5.29596e-01,
        8.60000e01,
        4.90396e-01,
        8.80000e01,
        4.51196e-01,
        9.00000e01,
        4.11995e-01,
        9.20000e01,
        3.72795e-01,
        9.40000e01,
        3.33595e-01,
        9.60000e01,
        2.94394e-01,
        9.80000e01,
        2.55194e-01,
        1.00000e02,
        2.15994e-01,
        1.02000e02,
        1.76793e-01,
        1.04000e02,
        1.37593e-01,
        1.06000e02,
        9.83930e-02,
        1.08000e02,
        5.91920e-02,
        1.10000e02,
        1.99920e-02,
        1.12000e02,
        0.00000e00,
        1.76000e02,
        0.00000e00,
    ),
)

phaseC = DEFI_FONCTION(
    NOM_PARA="INST",
    VALE=(
        0.00e000,
        0.0,
        6.00e001,
        0.0,
        6.20e001,
        0.0392,
        6.40e001,
        0.078401,
        6.60e001,
        0.117601,
        6.80e001,
        0.156801,
        7.00e001,
        0.196002,
        7.20e001,
        0.235202,
        7.40e001,
        0.274402,
        7.60e001,
        0.313603,
        7.80e001,
        0.352803,
        8.00e001,
        0.392003,
        8.20e001,
        0.431203,
        8.40e001,
        0.470404,
        8.60e001,
        0.509604,
        8.80e001,
        0.548804,
        9.00e001,
        0.588005,
        9.20e001,
        0.627205,
        9.40e001,
        0.666405,
        9.60e001,
        0.705606,
        9.80e001,
        0.744806,
        1.00e002,
        0.784006,
        1.02e002,
        0.823207,
        1.04e002,
        0.862407,
        1.06e002,
        0.901607,
        1.08e002,
        0.940808,
        1.10e002,
        0.980008,
        1.12e002,
        1.0,
        1.76e002,
        1.0,
    ),
)

transf = DEFI_FONCTION(
    NOM_PARA="INST",
    VALE=(
        0.00000e00,
        2.00000e02,
        8.20000e01,
        2.00000e02,
        8.40000e01,
        1.99972e02,
        8.60000e01,
        1.98747e02,
        8.80000e01,
        1.97522e02,
        9.00000e01,
        1.96297e02,
        9.20000e01,
        1.95072e02,
        9.40000e01,
        1.93847e02,
        9.60000e01,
        1.92622e02,
        9.80000e01,
        1.91397e02,
        1.00000e02,
        1.90172e02,
        1.02000e02,
        1.88947e02,
        1.04000e02,
        1.87722e02,
        1.06000e02,
        1.86497e02,
        1.08000e02,
        1.85272e02,
        1.10000e02,
        1.84047e02,
        1.12000e02,
        1.83435e02,
        1.14000e02,
        1.83435e02,
        1.16000e02,
        1.83435e02,
        1.18000e02,
        1.83435e02,
        1.20000e02,
        1.83435e02,
        1.22000e02,
        1.83435e02,
        1.24000e02,
        1.83435e02,
        1.26000e02,
        1.83435e02,
        1.28000e02,
        1.83435e02,
        1.30000e02,
        1.83435e02,
        1.32000e02,
        1.83435e02,
        1.34000e02,
        1.83435e02,
        1.36000e02,
        1.83435e02,
        1.38000e02,
        1.83435e02,
        1.40000e02,
        1.83435e02,
        1.42000e02,
        1.83435e02,
        1.44000e02,
        1.83435e02,
        1.46000e02,
        1.83435e02,
        1.48000e02,
        1.83435e02,
        1.50000e02,
        1.83435e02,
        1.52000e02,
        1.83435e02,
        1.54000e02,
        1.83435e02,
        1.56000e02,
        1.83435e02,
        1.58000e02,
        1.83435e02,
        1.60000e02,
        1.83435e02,
        1.62000e02,
        1.83435e02,
        1.64000e02,
        1.83435e02,
        1.66000e02,
        1.83435e02,
        1.68000e02,
        1.83435e02,
        1.70000e02,
        1.83435e02,
        1.72000e02,
        1.83435e02,
        1.74000e02,
        1.83435e02,
        1.76000e02,
        1.83435e02,
    ),
)


FBM1 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="LINEAIRE",
    PROL_GAUCHE="LINEAIRE",
    VALE=(
        0.0,
        4353.14e6,
        20.0,
        4257.40e6,
        40.0,
        4161.57e6,
        60.0,
        4065.64e6,
        80.0,
        3969.62e6,
        100.0,
        3873.50e6,
        120.0,
        3777.29e6,
        140.0,
        3680.98e6,
        160.0,
        3584.58e6,
        180.0,
        3488.09e6,
        200.0,
        3391.50e6,
        220.0,
        3294.81e6,
        240.0,
        3198.03e6,
        260.0,
        3101.16e6,
        280.0,
        3004.19e6,
        300.0,
        2907.12e6,
        320.0,
        2809.96e6,
        340.0,
        2712.70e6,
        360.0,
        2615.35e6,
        380.0,
        2517.90e6,
        400.0,
        2420.35e6,
        420.0,
        2322.71e6,
        440.0,
        2224.97e6,
        460.0,
        2127.13e6,
        480.0,
        2029.20e6,
        500.0,
        1931.17e6,
        520.0,
        1833.04e6,
        540.0,
        1734.82e6,
        560.0,
        1636.50e6,
        580.0,
        1538.08e6,
        600.0,
        1439.56e6,
        620.0,
        1340.95e6,
        640.0,
        1242.24e6,
        660.0,
        1143.42e6,
        680.0,
        1044.52e6,
        700.0,
        945.51e6,
        720.0,
        846.40e6,
        740.0,
        747.20e6,
        760.0,
        647.89e6,
        780.0,
        548.49e6,
        800.0,
        448.99e6,
        820.0,
        349.39e6,
        840.0,
        249.69e6,
        860.0,
        149.89e6,
        880.0,
        49.99e6,
        900.0,
        -50.01e6,
    ),
)

FBM2 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="LINEAIRE",
    PROL_GAUCHE="LINEAIRE",
    VALE=(0.0, 80.0e6, 900.0, 530.0e6),
)

AUS1 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="LINEAIRE",
    PROL_GAUCHE="LINEAIRE",
    VALE=(
        0.0,
        5589.31e6,
        20.0,
        5494.77e6,
        40.0,
        5400.14e6,
        60.0,
        5305.43e6,
        80.0,
        5210.62e6,
        100.0,
        5115.71e6,
        120.0,
        5020.72e6,
        140.0,
        4925.63e6,
        160.0,
        4830.45e6,
        180.0,
        4735.17e6,
        200.0,
        4639.80e6,
        220.0,
        4544.34e6,
        240.0,
        4448.79e6,
        260.0,
        4353.14e6,
        280.0,
        4257.40e6,
        300.0,
        4161.57e6,
        320.0,
        4065.64e6,
        340.0,
        3969.62e6,
        360.0,
        3873.50e6,
        380.0,
        3777.29e6,
        400.0,
        3680.98e6,
        420.0,
        3584.58e6,
        440.0,
        3488.09e6,
        460.0,
        3391.50e6,
        480.0,
        3294.81e6,
        500.0,
        3198.03e6,
        520.0,
        3101.16e6,
        540.0,
        3004.19e6,
        560.0,
        2907.12e6,
        580.0,
        2809.96e6,
        600.0,
        2712.70e6,
        620.0,
        2615.35e6,
        640.0,
        2517.90e6,
        660.0,
        2420.35e6,
        680.0,
        2322.71e6,
        700.0,
        2224.97e6,
        720.0,
        2127.13e6,
        740.0,
        2029.20e6,
        760.0,
        1931.17e6,
        780.0,
        1833.04e6,
        800.0,
        1734.82e6,
        820.0,
        1636.50e6,
        840.0,
        1538.08e6,
        860.0,
        1439.56e6,
        880.0,
        1340.95e6,
        900.0,
        1242.24e6,
    ),
)

AUS2 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="LINEAIRE",
    PROL_GAUCHE="LINEAIRE",
    VALE=(0.0, -50.0e6, 900.0, 400.0e6),
)

ALP1 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="CONSTANT",
    PROL_GAUCHE="CONSTANT",
    VALE=(0.0, 15.0e-6, 900.0, 15.0e-6),
)

ALP2 = DEFI_FONCTION(
    NOM_PARA="TEMP",
    PROL_DROITE="CONSTANT",
    PROL_GAUCHE="CONSTANT",
    VALE=(0.0, 23.5e-6, 900.0, 23.5e-6),
)

FMEL = DEFI_FONCTION(
    NOM_PARA="META", PROL_DROITE="CONSTANT", PROL_GAUCHE="CONSTANT", VALE=(0.0, 0.0, 1.0, 1.0)
)

YOUNG = DEFI_CONSTANTE(VALE=200000.0e6)

NU = DEFI_CONSTANTE(VALE=0.3)

ACIER2 = DEFI_MATERIAU(
    ELAS_META_FO=_F(
        E=YOUNG,
        NU=NU,
        F_ALPHA=ALP1,
        C_ALPHA=ALP2,
        PHASE_REFE="CHAUD",
        EPSF_EPSC_TREF=2.52e-3,
        F1_SY=FBM2,
        F2_SY=FBM2,
        F3_SY=FBM2,
        F4_SY=FBM2,
        C_SY=AUS2,
        SY_MELANGE=FMEL,
        TEMP_DEF_ALPHA=900.0,
    ),
    META_ECRO_LINE=_F(
        F1_D_SIGM_EPSI=FBM1,
        F2_D_SIGM_EPSI=FBM1,
        F3_D_SIGM_EPSI=FBM1,
        F4_D_SIGM_EPSI=FBM1,
        C_D_SIGM_EPSI=AUS1,
    ),
)


RAMPE = DEFI_FONCTION(
    NOM_PARA="INST", PROL_GAUCHE="LINEAIRE", PROL_DROITE="CONSTANT", VALE=(0.0, 0.0, 60.0, 360.0e6)
)

L_INST = DEFI_LIST_REEL(
    DEBUT=0.0,
    INTERVALLE=(
        _F(JUSQU_A=46.0, NOMBRE=4),
        _F(JUSQU_A=48.0, NOMBRE=2),
        _F(JUSQU_A=60.0, NOMBRE=6),
        _F(JUSQU_A=112.0, NOMBRE=26),
        _F(JUSQU_A=176.0, NOMBRE=32),
    ),
)


DEFLIST = DEFI_LIST_INST(DEFI_LIST=_F(LIST_INST=L_INST))


RESPM = SIMU_POINT_MAT(
    COMPORTEMENT=_F(RELATION="META_P_IL", RELATION_KIT=("ACIER",)),
    AFFE_VARC=(
        _F(
            V1=phase0,
            V2=phase0,
            V3=phase3,
            V4=phase0,
            V5=phaseA,
            V6=phaseC,
            V7=temp0,
            V8=temp,
            V9=transf,
            NOM_VARC="M_ACIER",
        ),
        _F(VALE_FONC=temp, VALE_REF=900.0, NOM_VARC="TEMP"),
    ),
    NEWTON=_F(MATRICE="TANGENTE", REAC_ITER=1, REAC_INCR=5),
    CONVERGENCE=_F(ITER_GLOB_MAXI=50),
    MATER=ACIER2,
    INCREMENT=_F(LIST_INST=L_INST),
    SIGM_IMPOSE=_F(SIYY=RAMPE),
)


TEST_TABLE(
    REFERENCE="AUTRE_ASTER",
    VALE_REFE=0.041071624044260,
    VALE_CALC=0.041071624044260,
    NOM_PARA="V3",
    TABLE=RESPM,
    FILTRE=_F(NOM_PARA="INST", VALE=114.0),
)

TEST_TABLE(
    REFERENCE="AUTRE_ASTER",
    VALE_REFE=0.036841623953657,
    VALE_CALC=0.036841623953657,
    NOM_PARA="EPYY",
    TABLE=RESPM,
    FILTRE=_F(NOM_PARA="INST", VALE=114.0),
)

TEST_TABLE(
    REFERENCE="AUTRE_ASTER",
    VALE_REFE=0.062068878377520,
    VALE_CALC=0.0620689881148,
    NOM_PARA="V3",
    TABLE=RESPM,
    FILTRE=_F(NOM_PARA="INST", VALE=176.0),
)

FIN()
#
